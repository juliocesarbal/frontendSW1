(()=>{var e={};e.id=639,e.ids=[639],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},883:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c}),s(1120),s(1506),s(5866);var t=s(3191),r=s(8716),i=s(7922),l=s.n(i),o=s(5231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(a,n);let c=["",{children:["workspace",{children:["[workspaceId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1120)),"C:\\Users\\julio\\OneDrive\\Escritorio\\Proyectos\\SW1 Examen\\frontend\\app\\workspace\\[workspaceId]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"C:\\Users\\julio\\OneDrive\\Escritorio\\Proyectos\\SW1 Examen\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\julio\\OneDrive\\Escritorio\\Proyectos\\SW1 Examen\\frontend\\app\\workspace\\[workspaceId]\\page.tsx"],m="/workspace/[workspaceId]/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/workspace/[workspaceId]/page",pathname:"/workspace/[workspaceId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3126:(e,a,s)=>{Promise.resolve().then(s.bind(s,1295))},1983:(e,a,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},7678:()=>{},1295:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var t=s(326),r=s(7577),i=s(5047),l=s(6557);let o=(0,l.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),n=(0,l.Z)("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);var c=s(8378),d=s(6283),m=s(4061);let x=(0,l.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);var h=s(3855),p=s(7947),g=s(2366),u=s(6824);function y({params:e}){let a=(0,i.useRouter)(),{user:s}=(0,p.t)(),{currentWorkspace:l,fetchWorkspaceById:y,isLoading:w}=(0,g.Q)(),[j,v]=(0,r.useState)([]),[f,k]=(0,r.useState)(!1),[b,N]=(0,r.useState)(""),P=async()=>{if(b.trim()&&s)try{k(!0);let s=await u.KI.createDiagram(e.workspaceId,b);v(e=>[s,...e]),N(""),a.push(`/workspace/${e.workspaceId}/diagram/${s.id}`)}catch(e){console.error("Error creating diagram:",e),alert(e.response?.data?.message||"Failed to create diagram")}finally{k(!1)}},L=s=>{a.push(`/workspace/${e.workspaceId}/diagram/${s}`)};return s?w||!l?t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Loading Workspace"}),t.jsx("p",{className:"text-gray-600",children:"Please wait while we load your workspace..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("header",{className:"bg-white shadow",children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between py-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("button",{onClick:()=>a.push("/dashboard"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[t.jsx(o,{size:20}),t.jsx("span",{children:"Dashboard"})]}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:l.name}),t.jsx("p",{className:"text-gray-600",children:l.description})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:[t.jsx(n,{size:16}),t.jsx("span",{children:"Share"})]}),(0,t.jsxs)("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:[t.jsx(c.Z,{size:16}),t.jsx("span",{children:"Settings"})]})]})]})})}),t.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"px-4 py-6 sm:px-0",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:t.jsx("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(d.Z,{className:"h-6 w-6 text-gray-400"})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Diagrams"}),t.jsx("dd",{className:"text-lg font-medium text-gray-900",children:j.length})]})})]})})}),t.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:t.jsx("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(m.Z,{className:"h-6 w-6 text-gray-400"})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Collaborators"}),t.jsx("dd",{className:"text-lg font-medium text-gray-900",children:l.collaborators.length+1})]})})]})})}),t.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:t.jsx("div",{className:"p-5",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(x,{className:"h-6 w-6 text-gray-400"})}),t.jsx("div",{className:"ml-5 w-0 flex-1",children:(0,t.jsxs)("dl",{children:[t.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Created"}),t.jsx("dd",{className:"text-lg font-medium text-gray-900",children:new Date(l.createdAt).toLocaleDateString()})]})})]})})})]}),t.jsx("div",{className:"bg-white shadow rounded-lg mb-8",children:(0,t.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[t.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Create New Diagram"}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[t.jsx("input",{type:"text",value:b,onChange:e=>N(e.target.value),placeholder:"Enter diagram name...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:e=>"Enter"===e.key&&P()}),(0,t.jsxs)("button",{onClick:P,disabled:!b.trim()||f,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[f?t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):t.jsx(h.Z,{size:16}),t.jsx("span",{children:"Create Diagram"})]})]})]})}),t.jsx("div",{className:"bg-white shadow rounded-lg",children:(0,t.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[t.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"UML Diagrams"}),0===j.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(d.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),t.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No diagrams"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first UML diagram."})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(e=>(0,t.jsxs)("div",{onClick:()=>L(e.id),className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h4",{className:"font-medium text-gray-900 truncate",children:e.name}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["v",e.version]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 mb-3",children:[e.data?.classes?.length||0," classes â€¢"," ",e.data?.relations?.length||0," relations"]}),(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:["Updated ",new Date(e.updatedAt).toLocaleDateString()]})]},e.id))})]})}),l.collaborators.length>0&&t.jsx("div",{className:"bg-white shadow rounded-lg mt-8",children:(0,t.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[t.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"Collaborators"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"h-8 w-8 bg-blue-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-medium text-white",children:l.owner.name.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.owner.name}),t.jsx("p",{className:"text-xs text-gray-500",children:l.owner.email})]})]}),t.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Owner"})]}),l.collaborators.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"h-8 w-8 bg-gray-400 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-medium text-white",children:e.user.name.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.user.name}),t.jsx("p",{className:"text-xs text-gray-500",children:e.user.email})]})]}),t.jsx("span",{className:"text-xs text-gray-600 font-medium capitalize",children:e.role.toLowerCase()})]},e.id))]})]})})]})})]}):t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})})}},6824:(e,a,s)=>{"use strict";s.d(a,{KI:()=>l,kv:()=>r,og:()=>i,pe:()=>n,vM:()=>o});let t=s(4464).Z.create({baseURL:"http://localhost:3002/api",timeout:1e4});t.interceptors.request.use(e=>{let a=localStorage.getItem("token");return a&&(e.headers.Authorization=`Bearer ${a}`),e}),t.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)));let r={login:async e=>(await t.post("/auth/login",e)).data,register:async e=>(await t.post("/auth/register",e)).data,getProfile:async()=>(await t.get("/auth/profile")).data,verifyToken:async()=>(await t.get("/auth/verify")).data},i={getWorkspaces:async()=>(await t.get("/workspaces")).data,getWorkspaceById:async e=>(await t.get(`/workspaces/${e}`)).data,createWorkspace:async e=>(await t.post("/workspaces",e)).data,addCollaborator:async(e,a,s)=>(await t.post(`/workspaces/${e}/collaborators`,{email:a,role:s})).data},l={getDiagramById:async e=>(await t.get(`/diagrams/${e}`)).data,createDiagram:async(e,a)=>(await t.post("/diagrams",{workspaceId:e,name:a})).data,updateDiagram:async(e,a)=>(await t.put(`/diagrams/${e}`,{data:a})).data,addClass:async(e,a)=>(await t.post(`/diagrams/${e}/classes`,a)).data},o={generateUML:async(e,a)=>(await t.post("/ai-chat/generate-uml",{prompt:e,diagramId:a})).data,chat:async(e,a)=>(await t.post("/ai-chat/chat",{message:e,context:a})).data,getSuggestions:async()=>(await t.get("/ai-chat/suggestions")).data,getTemplates:async()=>(await t.get("/ai-chat/templates")).data},n={generateSpringBoot:async e=>(await t.post(`/code-generation/spring-boot/${e}`)).data,downloadProject:async e=>(await t.get(`/code-generation/download/${e}`,{responseType:"blob"})).data,getGeneratedProjects:async()=>(await t.get("/code-generation/projects")).data}},6557:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(7577),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=(e,a)=>{let s=(0,t.forwardRef)(({color:s="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:n,children:c,...d},m)=>(0,t.createElement)("svg",{ref:m,...r,width:l,height:l,stroke:s,strokeWidth:n?24*Number(o)/Number(l):o,className:`lucide lucide-${i(e)}`,...d},[...a.map(([e,a])=>(0,t.createElement)(e,a)),...(Array.isArray(c)?c:[c])||[]]));return s.displayName=`${e}`,s}},6283:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(6557).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},3855:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8378:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(6557).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4061:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(6557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},7947:(e,a,s)=>{"use strict";s.d(a,{t:()=>l});var t=s(3539),r=s(5251),i=s(6824);let l=(0,t.Ue)()((0,r.tJ)((e,a)=>({user:null,token:null,isLoading:!1,error:null,login:async a=>{e({isLoading:!0,error:null});try{let s=await i.kv.login(a);e({user:s.user,token:s.token,isLoading:!1}),localStorage.setItem("token",s.token)}catch(a){throw e({error:a.response?.data?.message||"Login failed",isLoading:!1}),a}},register:async a=>{e({isLoading:!0,error:null});try{let s=await i.kv.register(a);e({user:s.user,token:s.token,isLoading:!1}),localStorage.setItem("token",s.token)}catch(a){throw e({error:a.response?.data?.message||"Registration failed",isLoading:!1}),a}},logout:()=>{e({user:null,token:null,error:null}),localStorage.removeItem("token"),localStorage.removeItem("user")},clearError:()=>{e({error:null})},checkAuth:async()=>{let s=localStorage.getItem("token");if(s)try{if((await i.kv.verifyToken()).valid){let a=await i.kv.getProfile();e({user:a,token:s})}else a().logout()}catch(e){a().logout()}}}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token})}))},2366:(e,a,s)=>{"use strict";s.d(a,{Q:()=>i});var t=s(3539),r=s(6824);let i=(0,t.Ue)((e,a)=>({workspaces:{owned:[],collaborated:[]},currentWorkspace:null,isLoading:!1,error:null,fetchWorkspaces:async()=>{e({isLoading:!0,error:null});try{let a=await r.og.getWorkspaces();e({workspaces:a,isLoading:!1})}catch(a){e({error:a.response?.data?.message||"Failed to fetch workspaces",isLoading:!1})}},fetchWorkspaceById:async a=>{e({isLoading:!0,error:null});try{let s=await r.og.getWorkspaceById(a);e({currentWorkspace:s,isLoading:!1})}catch(a){e({error:a.response?.data?.message||"Failed to fetch workspace",isLoading:!1})}},createWorkspace:async s=>{e({isLoading:!0,error:null});try{let t=await r.og.createWorkspace(s),i=a().workspaces;return e({workspaces:{...i,owned:[t,...i.owned]},isLoading:!1}),t}catch(a){throw e({error:a.response?.data?.message||"Failed to create workspace",isLoading:!1}),a}},addCollaborator:async(s,t,i)=>{try{await r.og.addCollaborator(s,t,i),a().currentWorkspace?.id===s&&await a().fetchWorkspaceById(s)}catch(a){throw e({error:a.response?.data?.message||"Failed to add collaborator"}),a}},clearError:()=>{e({error:null})}}))},1506:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>o,metadata:()=>l});var t=s(9510),r=s(7366),i=s.n(r);s(7272);let l={title:"UML Collaborative Platform",description:"Create and collaborate on UML diagrams with AI assistance"};function o({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{className:i().className,children:e})})}},1120:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(8570).createProxy)(String.raw`C:\Users\julio\OneDrive\Escritorio\Proyectos\SW1 Examen\frontend\app\workspace\[workspaceId]\page.tsx#default`)},7272:()=>{}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[480,27],()=>s(883));module.exports=t})();